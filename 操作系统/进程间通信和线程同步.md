[TOC]



## 进程间通信方式及优缺点

#### 1. 管道（PIPE）

##### 1) 有名管道

- 一种半双工的通信方式，它允许无亲缘关系进程间的通信

  > 半双工：数据传输指数据可以在一个信号载体的两个方向上传输，但是不能同时传输。

- 优点：可以实现任意关系的进程间的通信

- 缺点：① 长期存于系统中，使用不当容易出错；② 缓冲区有限

##### 2) 无名管道

- 一种半双工的通信方式，只能在具有亲缘关系的进程间使用（父子进程）
- 优点：简单方便
- 缺点：① 局限于单向通信；② 只能创建在它的进程以及其有亲缘关系的进程之间；③ 缓冲区有限



#### 2. 信号量（Semaphore）

- 一个计数器，可以用来控制多个线程对共享资源的访问

- 优点：可以同步进程
- 缺点：信号量有限



#### 3. 信号（Signal）

- 一种比较复杂的通信方式，用于通知接收进程某个事件已经发生



#### 4. 消息队列（Message Queue）

- 是消息的链表，存放在内核中并由消息队列标识符标识
- 优点：可以实现任意进程间的通信，并通过系统调用函数来实现消息发送和接收之间的同步，无需考虑同步问题，方便
- 缺点：信息的复制需要额外消耗 CPU 的时间，不适宜于信息量大或操作频繁的场合



#### 5. 共享内存（Shared Memory）

- 映射一段能被其他进程所访问的内存，这段共享内存由一个进程创建，但多个进程都可以访问
- 优点：无须复制，快捷，信息量大
- 缺点：① 通信是通过将共享空间缓冲区直接附加到进程的虚拟地址空间中来实现的，因此进程间的读写操作的同步问题；② 利用内存缓冲区直接交换信息，内存的实体存在于计算机中，只能同一个计算机系统中的诸多进程共享，不方便网络通信



#### 6. 套接字（Socket）

- 可用于不同及其间的进程通信

  > socket 的原意是“插座”，在计算机通信领域，socket 被翻译为“套接字”，它是计算机之间进行通信的一种约定或一种方式。通过 socket 这种约定，一台计算机可以接收其他计算机的数据，也可以向其他计算机发送数据。

- 优点：① 传输数据为字节级，传输数据可自定义，数据量小效率高； ② 传输数据时间短，性能高； ③ 适合于客户端和服务器端之间信息实时交互；④ 可以加密,数据安全性强

- 缺点：需对传输的数据进行解析，转化成应用级的数据

  > 和计算机网络中的套接字是同一个？

> 套接字的具体过程：https://blog.csdn.net/violet_echo_0908/article/details/51201278







## 线程间的同步方式

#### 1. 锁机制

包括互斥锁/量（mutex）、读写锁（reader-writer lock）、自旋锁（spin lock）、条件变量（condition）

- **互斥锁**

  互斥量其实可以理解为一个简化的信号量，它只有两种状态：0和1。互斥锁是用来解决**进程（线程）互斥**问题的。所谓进程互斥，就是两个进程实际上是一种互斥的关系，两者不能同时访问共享资源。

  互斥量和信号量原理比较类似，一旦一个线程获得了锁，那么其它线程就无法访问共享资源，从而被阻塞，直到该线程交还出了锁的所有权，另外一个线程才能获得锁。

- **读写锁**

  允许多个线程同时读共享数据，而对写操作是互斥的。

- **自旋锁**

  与互斥锁类似，都是为了保护共享资源。互斥锁是当资源被占用，申请者进入睡眠状态；而自旋锁则循环检测保持者是否已经释放锁。

- **条件变量**

  可以以原子的方式阻塞进程，直到某个特定条件为真为止。对条件的测试是在互斥锁的保护下进行的。条件变量始终与互斥锁一起使用。



#### 2. 信号量机制

同上

#### 3. 信号机制

同上

#### 4. 屏障

屏障允许每个线程等待，直到所有的合作线程都达到某一点，然后从该点继续执行。

































































